<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ritual Library</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      background: #fdfaf5;
      color: #3a2e25;
      margin: 0;
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 260px;
      background: #f5ede3;
      padding: 1rem;
      overflow-y: auto;
      border-right: 2px solid #e2d2c2;
    }
    .sidebar h2 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      color: #5a3e2b;
      border-bottom: 1px solid #c7a77a;
      padding-bottom: 0.2rem;
    }
    .sidebar details {
      margin-bottom: 1rem;
    }
    .sidebar summary {
      cursor: pointer;
      font-weight: bold;
      color: #7b4b2a;
    }
    .sidebar ul {
      list-style-type: none;
      padding-left: 1rem;
    }
    .sidebar li {
      margin: 0.3rem 0;
      cursor: pointer;
      color: #5c3d2e;
    }
    .sidebar li:hover {
      text-decoration: underline;
    }
    .sidebar li.active {
      font-weight: bold;
      text-decoration: underline;
      background-color: #eaddcf;
      padding-left: 4px;
    }
    .content {
      padding: 2rem;
      overflow-y: auto;
      flex-grow: 1;
      max-width: 800px;
      margin: 0 auto;
    }
    h1 {
      font-size: 2rem;
      color: #7b4b2a;
    }
    h2 {
      font-size: 1.4rem;
      color: #5c3d2e;
    }
    .quote {
      font-style: italic;
      background: #fff7ea;
      padding: 1rem;
      border-left: 4px solid #c7a77a;
      margin-bottom: 2rem;
    }
    ul, p {
      margin-bottom: 1rem;
    }
    @media (max-width: 768px) {
      .sidebar {
        display: none;
      }
      body.menu-open .sidebar {
        display: block;
        position: absolute;
        z-index: 1000;
        height: 100vh;
      }
    }
  </style>
  <script src="rituals.js" defer></script>
</head>
<body>
  <div class="sidebar">
    <h2>üìö Ritual Folders</h2>
    <details open>
      <summary>üåÄ Bharata</summary>
      <ul>
        <li data-file="henna-daughter">Henna from Daughter</li>
        <li data-file="bhoomi-car">Bhoomi: Naming the Car</li>
      </ul>
    </details>
    <details>
      <summary>üåç Ntu</summary>
      <ul>
        <li data-file="walking-ancestors">Walking with Ancestors</li>
      </ul>
    </details>
    <details>
      <summary>‚ú® Zameen-e-N≈´r</summary>
      <ul>
        <li data-file="coffee-blessings">Coffee Grounds and Blessings</li>
      </ul>
    </details>
    <details>
      <summary>üåä Nusantara</summary>
      <ul>
        <li>Coming Soon</li>
      </ul>
    </details>
    <details>
      <summary>üê¢ Turtle Island</summary>
      <ul>
        <li>Coming Soon</li>
      </ul>
    </details>
    <details>
      <summary>üß∫ My Shared Rituals</summary>
      <ul>
        <li>Ritual Draft 1</li>
      </ul>
    </details>
  </div>

  <div class="content"></div>
</body>
</html>
"""

# Create the rituals.js file content
rituals_js_content = """
function showRitual(title, content) {
  const contentDiv = document.querySelector('.content');
  contentDiv.innerHTML = `<h1>${title}</h1>${content}`;
  if (window.innerWidth <= 768) {
    document.body.classList.remove('menu-open');
  }
}

async function loadRitual(fileName, title, clickedLi) {
  const response = await fetch(`rituals/${fileName}.html`);
  const html = await response.text();
  showRitual(title, html);

  // Highlight the active ritual
  document.querySelectorAll('.sidebar li').forEach(li => li.classList.remove('active'));
  if (clickedLi) clickedLi.classList.add('active');

  // Keep the details open
  const parentDetails = clickedLi.closest('details');
  document.querySelectorAll('.sidebar details').forEach(d => {
    if (d !== parentDetails) d.removeAttribute('open');
  });
  parentDetails.setAttribute('open', true);
}

window.onload = () => {
  const rituals = document.querySelectorAll('.sidebar li');
  rituals.forEach(ritual => {
    ritual.addEventListener('click', () => {
      const file = ritual.getAttribute('data-file');
      const title = ritual.textContent;
      if (file) {
        loadRitual(file, title, ritual);
      } else {
        showRitual(title, `<p><em>This is a placeholder for: ${title}</em></p>`);
      }
    });
  });

  // Load Spirit of Earth default
  showRitual("üå± Spirit of Earth", \`
    <div class="quote">
      "Weaving rituals, stories, and elemental consciousness into one scroll of remembrance."
    </div>
    <textarea rows="10" style="width:100%; padding:1rem; font-family:Georgia,serif;"></textarea><br><br>
    <button onclick="alert('Will be shared into sacred space soon')" style="padding:0.5rem 1rem; background:#7b4b2a; color:white; border:none; cursor:pointer;">Share</button>
  \`);
};
"""
